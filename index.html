<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Swarg</title>

<script src="https://cdn.tailwindcss.com"></script>

<style>
body{background:#020406;color:#fff;font-family:system-ui}
.hidden{display:none}
.box{background:#0a0f1d;border:1px solid #ffffff22;border-radius:24px;padding:20px}
.btn{background:linear-gradient(135deg,#00fff2,#3b82f6);color:#000;
font-weight:700;padding:14px;border-radius:16px;width:100%}
.copy{background:#ffffff12;border:1px solid #ffffff22;padding:14px;border-radius:16px}
textarea,input{background:#000;border:1px solid #ffffff22;
border-radius:16px;padding:14px;color:#00fff2;width:100%}
</style>
</head>

<body class="p-6 max-w-xl mx-auto">

<h1 class="text-5xl font-black italic text-center mb-2">Swarg</h1>
<p class="text-center opacity-70 mb-6">Amar Kumar ✔</p>

<input id="key" type="password" placeholder="Secret password" class="mb-4">

<div class="flex justify-center gap-6 mb-6">
<button onclick="showEnc()" class="font-bold">ENCODE</button>
<button onclick="showDec()" class="font-bold">DECODE</button>
</div>

<!-- ENCODE -->
<div id="encBox" class="box">
<textarea id="encInput" rows="4" placeholder="Enter text" oninput="typeSound()"></textarea>
<div id="encOut" class="box mt-4 text-sm">Ready</div>
<div class="grid grid-cols-2 gap-3 mt-4">
<button class="btn" onclick="encrypt()">Secure Data</button>
<button class="copy" onclick="copyText('encOut')">Copy</button>
</div>
</div>

<!-- DECODE -->
<div id="decBox" class="box hidden">
<textarea id="decInput" rows="4" placeholder="Paste code" oninput="typeSound()"></textarea>
<div id="decOut" class="box mt-4 text-sm">Waiting</div>
<div class="grid grid-cols-2 gap-3 mt-4">
<button class="btn" onclick="decrypt()">Reveal Truth</button>
<button class="copy" onclick="copyText('decOut')">Copy</button>
</div>
</div>

<audio id="type" src="https://www.soundjay.com/communication/sounds/typewriter-key-1.mp3"></audio>

<script>
function showEnc(){
encBox.classList.remove("hidden");
decBox.classList.add("hidden");
}
function showDec(){
decBox.classList.remove("hidden");
encBox.classList.add("hidden");
}

function typeSound(){
let a=document.getElementById("type");
a.currentTime=0;a.play().catch(()=>{});
}

function copyText(id){
navigator.clipboard.writeText(document.getElementById(id).innerText);
alert("Copied");
}

/* SIMPLE STABLE ENCODING (WORKING) */
function encrypt(){
let t=encInput.value;
let k=key.value;
if(!t||!k){alert("Text + password needed");return;}
encOut.innerText=btoa(k+"::"+t);
}

function decrypt(){
try{
let k=key.value;
let raw=atob(decInput.value);
if(!raw.startsWith(k+"::")) throw 0;
decOut.innerText=raw.slice(k.length+2);
}catch{
decOut.innerText="❌ Wrong password / invalid code";
}
}
</script>

</body>
</html>
